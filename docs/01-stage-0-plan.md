## Stage 0: "Da Rusty Start" - Почувствуй боль анемичной модели

> *Цель: Создать типичное Django приложение с сервисным слоем, чтобы ПОНЯТЬ какие проблемы оно создаёт*

### Контекст задачи

Орки собирают оружие из награбленных деталей. Мек (механик-орк) берёт несколько деталей из своей мастерской, собирает из них стреляло (shoota), и может из него выстрелить. Чем больше дакки (огневой мощи) у оружия - тем выше шанс попадания.

### Что нужно реализовать

#### 1. Модели данных (анемичные!)

**Workshop** - мастерская мека:
```
- id (UUID)
- mek_name (строка)
- reputation (целое число, по умолчанию 0)
- created_at (дата/время)
```

**Scrap** - лут для сборки:
```
- id (UUID)
- workshop (внешний ключ)
- name (строка, например "Ржавая труба")
- scrap_type (строка, например "metal", "shooty_bitz")
- quantity (целое число)
```

**Weapon** - оружие:
```
- id (UUID)
- workshop (внешний ключ)
- name (строка)
- dakka (целое число)
- parts_used (JSON - массив ID использованных деталей)
- created_at (дата/время)
```

**Важно:** Модели должны быть **анемичными** - только данные, никакой логики!

#### 2. Сервисный слой

Создай сервисы (классы или функции) для:

**WorkshopService:**
- Создание мастерской
- Добавление лута в инвентарь

**WeaponService:**
- Сборка оружия из доступных деталей
  - Нужно минимум 3 детали
  - Каждая деталь даёт +5 дакки
  - После сборки уменьшить quantity деталей
  - Увеличить reputation мастерской на +1
- Стрельба из оружия
  - Шанс попадания = dakka / 100
  - Вернуть "HIT" или "MISS"

#### 3. REST API

Создай endpoints (DRF или что удобно):
- `POST /api/workshops/` - создать мастерскую
- `POST /api/workshops/{id}/add_scrap/` - добавить лут
- `POST /api/workshops/{id}/build_weapon/` - собрать оружие
- `POST /api/weapons/{id}/fire/` - выстрелить

#### 4. Тесты

Напиши базовые тесты для сервисов через Django TestCase (с БД).

### Вопросы для размышления (ответь себе письменно)

После реализации задай себе эти вопросы:

1. **Где находится логика "сборки оружия"?** В одном месте или размазана?
2. **Что будет если нужно изменить правило расчёта дакки?** Сколько мест нужно изменить?
3. **Можно ли создать weapon с отрицательной дакой через ORM напрямую?** Что это значит?
4. **Как протестировать бизнес-правило "каждая деталь даёт +5 дакки" без БД?** Возможно ли?
5. **Что означает `parts_used = JSONField()`?** Понятно ли без чтения кода сервиса?

### Ключевые слова для изучения

- Anemic Domain Model (антипаттерн)
- Transaction Script pattern
- Service Layer pattern
- Django ORM basics

### Критерии готовности

- [ ] Можно создать мастерскую через API
- [ ] Можно добавить 3 детали через API
- [ ] Можно собрать оружие через API
- [ ] Можно выстрелить через API и получить HIT/MISS
- [ ] Написаны тесты с использованием БД
- [ ] Ты **письменно ответил** на вопросы для размышления

### Время

~15-20 часов
